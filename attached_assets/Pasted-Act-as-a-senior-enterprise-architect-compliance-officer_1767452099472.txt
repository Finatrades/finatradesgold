Act as a senior enterprise architect, compliance officer, and full-stack developer.

Design and validate a complete Employee Role & Permission Management System
for a regulated financial / gold-backed platform.

GOAL:
• No employee can access admin components without explicit role-based permission
• Every task must be predefined, limited, and auditable
• Sensitive actions must follow multi-level approval (First Approval → Final Approval)
• Zero implicit access — everything must be explicitly granted

------------------------------------
1️⃣ ROLE CREATION & ASSIGNMENT
------------------------------------
Design a system where:

• Super Admin creates Roles (not users)
• Each Role has:
  - Role Name
  - Description
  - Department
  - Risk Level (Low / Medium / High / Critical)

Example roles:
• Operations Executive
• Finance Reviewer
• Compliance Officer
• Vault Manager
• System Admin
• Read-Only Auditor

Users are assigned roles — NOT permissions directly.

------------------------------------
2️⃣ PERMISSION MATRIX (STRICT)
------------------------------------
For each role define explicit permissions:
• View
• Create
• Edit
• Approve (Level 1)
• Approve (Final)
• Reject
• Export
• Delete (very limited)

Admin components must be modular:
• Dashboard widgets
• User management
• Wallets
• Vault ledger
• Transactions
• Reports
• System settings

Access Rule:
❌ If permission is not granted → access must be blocked by default

------------------------------------
3️⃣ TASK-BASED ACCESS (NO FREE ACTIONS)
------------------------------------
All actions must be task-driven.

Each task must have:
• Task ID
• Task Name
• Triggered by (User/System)
• Allowed Roles
• Approval Flow Required (Yes/No)
• First Approver Role
• Final Approver Role
• SLA Time
• Auto-expiry rules

Example tasks:
• Approve gold transfer
• Release BNSL funds
• Edit vault record
• Create corporate wallet
• Change system configuration

------------------------------------
4️⃣ MULTI-ROLE APPROVAL FLOW
------------------------------------
Implement strict approval logic:

• Initiator CANNOT approve their own task
• First Approver verifies data correctness
• Final Approver authorizes execution
• Execution only happens AFTER final approval

Flow example:
User → Task Created → Pending L1 Approval
L1 Approved → Pending Final Approval
Final Approved → Task Executed
Any Rejection → Task Closed + Logged

------------------------------------
5️⃣ ADMIN COMPONENT PROTECTION
------------------------------------
Ensure:
• UI hides components without permission
• Backend blocks API calls even if UI is bypassed
• Every admin API validates:
  - Role
  - Permission
  - Approval state

No direct DB or system action without approval verification.

------------------------------------
6️⃣ AUDIT & LOGGING (MANDATORY)
------------------------------------
Log EVERYTHING:
• Who initiated
• Who approved (L1 & Final)
• Timestamp
• Old value → New value
• IP address
• Device / session ID

Logs must be:
• Read-only
• Tamper-proof
• Exportable for audit

------------------------------------
7️⃣ EDGE CASE & ABUSE PREVENTION
------------------------------------
Handle cases like:
• User has multiple roles → apply highest restriction
• Emergency override → requires 2 final approvers
• Role change → immediate permission recalculation
• Approval timeout → task auto-cancel or escalate

------------------------------------
8️⃣ DELIVERABLES REQUIRED
------------------------------------
Provide:
• Database schema (Roles, Permissions, Tasks, Approvals)
• Backend middleware logic
• Frontend visibility rules
• API permission guard examples
• Approval workflow diagrams
• Sample test cases for misuse attempts

FINAL RULE:
Assume every employee is untrusted by default.
Security, compliance, and auditability override convenience.
