PROMPT START

Act as a senior fintech architect and gold-backed banking system engineer.

Design and validate a unified USD ‚Üî Gold input and balance logic for a full-platform gold-backed financial system (wallets, payments, trade, BNSL, vaults).

1Ô∏è‚É£ Single Source of Truth

Treat gold (grams) as the only real balance

USD is never stored as value, only calculated dynamically

All ledgers, locks, reserves, certificates must record gold grams only

2Ô∏è‚É£ Dual Input System (User Experience)

Allow users to:

Enter USD amount

OR enter Gold amount (grams)

System behavior:

If user enters USD ‚Üí convert to gold using live gold price

If user enters gold ‚Üí convert to USD using the same price

Update the other field in real time

Lock both fields once user confirms

3Ô∏è‚É£ Conversion Formula (Mandatory)
goldGrams = usdAmount / liveGoldPricePerGram
usdAmount = goldGrams * liveGoldPricePerGram


Rules:

Use LBMA / system oracle price

Conversion happens before any transaction, lock, or fee

Fees, margins, BNSL locks apply on gold, not USD

4Ô∏è‚É£ Ledger & Database Rules

Store only:

gold_grams

gold_source (vault / bnsl / trade / locked)

USD values:

computed on the fly

never written into ledger tables

Historical records must preserve gold quantity, not USD

5Ô∏è‚É£ Platform-Wide Consistency (Must Validate)

Ensure this logic works identically across:

Wallet balance display

Send / Request payment

Deposit / Withdraw

BNSL buy-now-sell-later

Trade finance settlements

Certificates & vault ownership

Admin reports & audits

6Ô∏è‚É£ UX Safeguards

Show label:
‚ÄúUSD is an equivalent value. Your real balance is gold.‚Äù

Prevent mismatch by:

disabling manual edit after conversion

re-calculating on price refresh

Handle precision (up to 6 decimals for gold)

7Ô∏è‚É£ Compliance & Audit

System must pass audit where:

total gold in ledger = total vault gold

USD totals always reconcile back to gold

No floating USD exposure allowed

8Ô∏è‚É£ Output Required

Provide:

Clear logic validation

Edge cases (price change, partial fill, rounding)

UI/UX behavior summary

Backend validation checklist

üéØ PROMPT END
ü™ô Simple Explanation for Users (Optional UI Text)

‚ÄúYou can enter either USD or Gold.
USD is automatically converted into gold at the current gold price.
Your actual balance is always held in gold.‚Äù