You are a senior fintech engineer working on Finatrades (FinaPay + FinaVault + BNSL).
Implement the feature: “Transfer from FinaPay to BNSL Wallet (Hedged / Fixed Price Module)”.

GOAL (business logic)
1) When user moves value from FinaPay to BNSL, we MUST treat BNSL as a hedged/fixed-entry module:
   - On deposit into BNSL, lock gold grams at the ENTRY gold price (fixed rate).
   - The locked grams remain constant during the plan term (no revaluation inside BNSL).
   - User sees a FIXED USD value inside BNSL based on entry price (principal display).
   - Gains/earnings (if any) are shown separately (do not change principal grams unless product requires).
2) On withdrawal from BNSL back to FinaPay:
   - Convert the locked grams back using the CURRENT gold price at withdrawal time.
   - So user may receive more/less USD display in FinaPay depending on market price.
3) Show clear narration notices everywhere so layman users understand:
   - “BNSL uses fixed entry price (hedged). Your grams are locked at entry.”
   - “When you withdraw, conversion happens at current gold price.”

DATA MODEL / TABLES (create or adjust)
A) wallets
- finapay_wallet: holds grams_available, grams_locked, usd_display
- bnsl_wallet: holds grams_locked_total, entry_price_usd_per_gram_weighted_avg, usd_principal_fixed_display
B) bnsl_positions (new)
- id, user_id, plan_id, deposit_tx_id, deposit_usd, entry_price_usd_per_gram, grams_locked,
  start_at, end_at, status (ACTIVE/COMPLETED/CANCELLED),
  earnings_grams (optional), earnings_usd (optional),
  withdrawal_tx_id (nullable), withdrawal_price_usd_per_gram (nullable),
  withdrawal_usd_value (nullable)
C) ledger_entries (already exists)
Add new txn types:
- BNSL_DEPOSIT (finapay -> bnsl)
- BNSL_WITHDRAW (bnsl -> finapay)
Include fields: tx_id, user_id, source_wallet, dest_wallet, usd_amount_display, grams_amount, price_usd_per_gram_used,
status, created_at, meta_json (plan_id, position_id, notes)

PRICING RULES
- Use “price_at_execution” for each operation:
  - deposit uses gold_price_feed at that moment -> entry_price
  - withdraw uses gold_price_feed at that moment -> withdraw_price
- Store both prices in bnsl_positions and ledger meta.
- If price feed fails, use fallback price source (already defined in system) and mark meta_json.price_source="fallback".

API ENDPOINTS
1) POST /api/bnsl/deposit
Request: { planId, amountUsd }  // user enters USD
Steps (atomic transaction):
  a) Validate KYC tier allows BNSL.
  b) Validate FinaPay available balance (grams or usd display conversion).
  c) Fetch current gold price (usd_per_gram).
  d) Compute grams = amountUsd / price.
  e) Deduct grams from finapay_wallet.available and move to bnsl locked (not finapay locked; it leaves finapay).
  f) Create bnsl_position with entry_price and grams_locked.
  g) Update bnsl_wallet:
     - grams_locked_total += grams
     - entry_price_usd_per_gram_weighted_avg recalculated (weighted average by grams)
     - usd_principal_fixed_display = grams_locked_total * entry_price_weighted_avg
  h) Create ledger entry BNSL_DEPOSIT with narration.
Return:
  - position summary, bnsl wallet summary, finapay wallet summary
  - narration strings (below)

2) POST /api/bnsl/withdraw
Request: { positionId, withdrawMode: "FULL" | "PARTIAL", amountGrams? }
Steps (atomic transaction):
  a) Validate position ACTIVE and within allowed rules (maturity/penalty).
  b) Determine grams_to_withdraw.
  c) Fetch current gold price (usd_per_gram) -> withdraw_price.
  d) Compute withdraw_usd_display = grams_to_withdraw * withdraw_price.
  e) Reduce bnsl_position.grams_locked and bnsl_wallet.grams_locked_total.
  f) Credit grams_to_withdraw back into finapay_wallet.available grams.
     - finapay usd display updates with current price (system standard)
  g) Recompute bnsl_wallet principal display using bnsl weighted entry price (remaining locked grams).
  h) Create ledger entry BNSL_WITHDRAW with narration including both entry and current price, and outcome.
Return:
  - updated position, bnsl wallet summary, finapay wallet summary, narration

FRONTEND UI REQUIREMENTS
BNSL Wallet screen must show 3 blocks:
1) “Locked Gold (grams)” = grams_locked_total (constant unless deposit/withdraw)
2) “Fixed Principal (USD)” = usd_principal_fixed_display (based on ENTRY price, fixed)
3) “Withdraw Value Today (USD)” = grams_locked_total * current_price (live market reference)
Add a highlighted notice banner:
- “BNSL is a hedged fixed-entry module. Your principal is locked at the entry gold price. When you withdraw, conversion happens at today’s gold price.”
Each transaction row must show narration.

NARRATION STRINGS (must be generated & stored in ledger meta)
Deposit narration example:
- Title: “Moved to BNSL (Fixed Entry)”
- Body: “You moved $X from FinaPay to BNSL. Entry gold price was $P/g, so Y.YYYY g were locked. Your BNSL principal is now fixed at the entry price. Withdrawal will be calculated at the gold price on the withdrawal date.”

Withdraw narration example:
- Title: “Withdrawn from BNSL (Current Price)”
- Body: “You withdrew Y.YYYY g from BNSL back to FinaPay. Entry price was $P_entry/g, today’s price is $P_now/g. Value today = $V_now. Your remaining BNSL principal remains fixed at entry price.”

EDGE CASES / SAFETY
- Prevent negative balances.
- Use DB transaction + row locks to avoid race conditions (double withdraw).
- Enforce min/max deposit per plan.
- If user tries to withdraw before maturity, apply penalty rules (if any) and show it clearly in narration.
- Every deposit/withdraw must reconcile with FinaVault locked/reserved buckets if your architecture requires it (update reservedTradeGrams/lockedBnslGrams).
- Add unit tests for:
  - deposit grams calc
  - weighted entry price calc
  - withdraw at higher price vs lower price
  - partial withdraw
  - price feed failure fallback

DELIVERABLES
- Implement DB changes/migrations
- Implement endpoints + validation + atomic transactions
- Update wallet summary functions used on dashboard
- Update UI components for BNSL wallet blocks + notice banner + narration
- Add tests and sample mock data seed:
  - price=70/g deposit $700 -> 10g locked
  - later price=80/g withdraw 10g -> $800 display
  - later price=60/g withdraw 10g -> $600 display
